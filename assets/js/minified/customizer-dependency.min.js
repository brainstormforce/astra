!function(c){"use strict";var u=wp.customize,e={controls:{},init:function(){var i=this;i.handleDependency(),i.hideEmptySections(),u.bind("change",function(e,n){i.hasDependentControls(e.id)&&(i.handleDependency(),i.hideEmptySections(),i.hasDependencyWithContext(e.id))})},hasDependentControls:function(a){var s=!1;return c.each(astra.config,function(e,n){if(_.isUndefined(n.conditions)){var i=n[0];if(a==i)return void(s=!0)}else{var t=n.conditions;c.each(t,function(e,n){var i=n[0];a!=i||(s=!0)})}}),s},hasDependencyWithContext:function(e){document.dispatchEvent(new CustomEvent("AstraBuilderChangeRequiredDependency",{detail:{id:e}}))},handleDependency:function(){var t=this,e=u.get();t.checked_controls={},_.each(e,function(e,n){var i=u.control(n);t.checkControlVisibility(i,n)})},checkControlVisibility:function(e,n){var i=u.get();if(!_.isUndefined(e)&&void 0!==astra.config[n]){var t=!1,a=astra.config[n],s=_.isUndefined(a.conditions)?a:a.conditions,o=_.isUndefined(a.operator)?"AND":a.operator;void 0!==s&&(t=this.checkDependency(s,i,o),(this.checked_controls[n]=t)?e.container.removeClass("ast-hide"):e.container.addClass("ast-hide"))}},checkDependency:function(e,r,d){var f=this,h=!0,l=!1,n=e[0];if(_.isString(n)){var i,t=e[1],a=e[2];if(!_.isUndefined(astra.config[n])){e=_.isUndefined(astra.config[n].conditions)?astra.config[n]:astra.config[n].conditions;var s=_.isUndefined(astra.config[n].operator)?"AND":astra.config[n].operator;if(!_.isUndefined(e))if(f.checkDependency(e,r,s)){var o=u.control(n);void 0!==o&&o.container.removeClass("ast-hide")}else if(h=!(l=!0),"AND"==d)return}_.isUndefined(r[n])||l||!h||(i=r[n],h=f.compareValues(i,t,a))}else _.isArray(n)&&(c.each(e,function(e,n){var i=n[0],t=n[1],a=n[2],s=_.isUndefined(r[i])?"":r[i];if(void 0!==astra.config[i]){var o=_.isUndefined(astra.config[i].conditions)?astra.config[i]:astra.config[i].conditions,c=_.isUndefined(astra.config[i].operator)?"AND":astra.config[i].operator;if(!_.isUndefined(o))if(f.checkDependency(o,r,c))h=!0,u.control(i).container.removeClass("ast-hide");else if(h=!1,"AND"==d)return}else h=!0;if(h)if("AND"==d){if(!f.compareValues(s,t,a))return h=!1}else h=!!f.compareValues(s,t,a)&&(l=!0)}),l&&"OR"==d&&(h=!0));return h},hideEmptySections:function(){c("ul.accordion-section.control-section-ast_section").each(function(){var e=c(this).attr("id"),n=!1,i=c(this).find(" > .customize-control");0<i.length&&(i.each(function(){c(this).hasClass("ast-hide")||"none"==c(this).css("display")||(n=!0)}),n?c('.control-section[aria-owns="'+e+'"]').removeClass("ast-hide"):c('.control-section[aria-owns="'+e+'"]').addClass("ast-hide"))})},compareValues:function(e,n,i){var t=!1;switch(n){case"===":t=e===i;break;case">":t=i<e;break;case"<":t=e<i;break;case"<=":t=e<=i;break;case">=":t=i<=e;break;case"!=":t=e!=i;break;case"empty":var a=_.clone(e);t=_.isObject(a)||_.isArray(a)?(_.each(a,function(e,n){_.isEmpty(e)&&delete a[n]}),!!_.isEmpty(a)):!(!_.isNull(a)&&""!=a);break;case"not_empty":a=_.clone(e);(_.isObject(a)||_.isArray(a))&&_.each(a,function(e,n){_.isEmpty(e)&&delete a[n]}),t=!_.isEmpty(a);break;case"contains":_.isArray(e)&&-1!==c.inArray(i,e)&&(t=!0);break;default:t=_.isArray(i)?!_.isEmpty(i)&&!_.isEmpty(e)&&_.contains(i,e):e==i}return t}};c(function(){window.addEventListener("load",function(){e.init()})})}(jQuery);